<pre><p>//----------------------------------------------------------------------<br>
//                  Demonstration				                       |<br>
//                                                                     |<br>
//                                                                     |<br>
//                  --------------------------                         |<br>
//                  |     gmii_switch_2x2    |                         |<br>
//                  |                        |                         |<br>
//                  |                        |                         |<br>
//  Inner ports     |                        |      Outer_ports        |<br>
//                  |                        |                         |<br>
//gmii_rx_port_2<-------                  <--------gmii_rx_port_0      |<br>
//gmii_tx_port_2------->                  -------->gmii_tx_port_0      |<br>
//                  |                        |                         |<br>
//                  |                        |                         |<br>
//                  |                        |                         |<br>
//                  |                        |                         |<br>
//                  |                        |                         |<br>
//                  |                        |                         |<br>
//gmii_rx_port_3<------                  <--------gmii_rx_port_1       |<br>
//gmii_tx_port_3------>                  -------->gmii_tx_port_1       |<br>
//                  |                        |                         |<br>
//                  |                        |                         |<br>
//                  --------------------------                         |<br>
//                                                                     |<br>
//                                                                     |<br>
//                                                                     |<br>
//                                                                     |<br>
//                                                                     |<br>
//                                                                     |<br>
//----------------------------------------------------------------------<br>

Основная задача ядра - скоммутировать 2 внешних и 2 внутренних gmii-интерфейса. При необходимости, можно каскадировать данное ядро и получить большее количество интерфейсов.<br>
Принцип работы:<br>
1)При получении ARP запроса с внешнего интерфейса (например порт 0) MAC source ставится в соответствие этому порту в таблице. <br>
2)Предполагается, что ARP является броадкстным, в этом случае с порта 0 он отправляется на 3 оставшися порта.<br>
Следует заметить, что схема не имеет защиты от броадкстного шторма и QoS<br>
3)Допустим на запрос должен ответить микроблэйз с порта 2, соответственно его MAC source ставится в соответствие порту 2<br>
4)Соединение между устройствами на портах 2 и 0 установлено, теперь все пакеты с порта 0 и маком микроблейза будут перенаправляться на порт 2. и наоборот<br>

Дополнительно:<br>
Вставлены клок-конвертеры для согласования тактовых частот всех портов<br>
Реализовано детектирование укороченной преамбулы(некоторые PCS/PMS блоки обрезают первый байт преамбулы)<br>

Для сборки необходимо:<br>
из папки проекта запустить скрипт командой<br>
vivado -source script/create_project.tcl <br>

Проект представляет собой основной модуль и tesbanch для него</p></pre>
